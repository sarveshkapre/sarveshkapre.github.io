---
import type { CollectionEntry } from 'astro:content';
import TagPill from './TagPill.astro';

type Props = {
	post: CollectionEntry<'blog'>;
};

const { post } = Astro.props as Props;

const published = new Intl.DateTimeFormat('en-US', { dateStyle: 'medium' }).format(post.data.pubDate);
---

<li class="card">
	<article class="inner">
		<h2 class="title">
			<a class="titleLink" href={`/blog/${post.slug}/`}>{post.data.title}</a>
		</h2>
		<p class="meta">{published}</p>
		{post.data.tags.length > 0 ? (
			<ul class="tags">
				{post.data.tags.map((tag) => (
					<li class="tagItem">
						<TagPill tag={tag} />
					</li>
				))}
			</ul>
		) : null}
		<p class="desc">{post.data.description}</p>
	</article>
</li>

<style>
	.card {
		list-style: none;
	}

	.inner {
		padding: 14px 16px;
		border: 1px solid var(--border);
		border-radius: 14px;
		background: var(--panel);
		transition:
			border-color 0.15s ease,
			transform 0.15s ease;
	}

	.inner:hover {
		border-color: color-mix(in srgb, var(--border) 55%, var(--text) 45%);
		transform: translateY(-1px);
	}

	.title {
		margin: 0 0 6px;
		font-size: 18px;
		letter-spacing: -0.01em;
	}

	.titleLink {
		color: inherit;
		text-decoration: none;
	}

	.titleLink:hover {
		text-decoration: underline;
		text-decoration-thickness: 1px;
		text-underline-offset: 3px;
	}

	.meta {
		margin: 0 0 10px;
		font-size: 13px;
		color: var(--muted);
	}

	.tags {
		display: flex;
		gap: 8px;
		flex-wrap: wrap;
		padding: 0;
		margin: 0 0 10px;
	}

	.tagItem {
		list-style: none;
	}

	.desc {
		margin: 0;
		color: var(--muted);
		line-height: 1.5;
	}
</style>
