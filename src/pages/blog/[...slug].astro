---
import type { GetStaticPaths } from "astro";
import { getAllPosts } from "@/data/post";

export const prerender = true;

export const getStaticPaths = (async () => {
	const posts = await getAllPosts();
	return posts.map((post) => ({ params: { slug: post.id } }));
}) satisfies GetStaticPaths;

const { slug } = Astro.params;
const to = `/posts/${slug}/`;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="refresh" content={`0; url=${to}`} />
		<meta name="robots" content="noindex" />
		<link rel="canonical" href={to} />
		<meta name="viewport" content="width=device-width" />
		<title>Redirecting…</title>
	</head>
	<body>
		<p>Redirecting to <a href={to}>{to}</a>…</p>
	</body>
</html>

